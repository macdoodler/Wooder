<!DOCTYPE html>
<html>
<head>
    <title>Test Cutting Calculation</title>
</head>
<body>
    <h1>Testing Cutting Calculation</h1>
    <button onclick="testCutting()">Test Cutting Algorithm</button>
    <div id="results"></div>
    
    <script type="module">
        async function testCutting() {
            console.log('Starting cutting calculation test...');
            
            try {
                // Import the calculation function
                const { calculateOptimalCuts } = await import('./app/lib/calculateOptimalCuts.js');
                
                console.log('Successfully imported calculateOptimalCuts');
                
                // Test data
                const testParts = [
                    {
                        name: "Test Part 1",
                        length: 300,
                        width: 200,
                        thickness: 18,
                        quantity: 2,
                        material: "Plywood",
                        grainDirection: "horizontal"
                    }
                ];

                const testStock = [
                    {
                        id: "stock-1",
                        length: 1200,
                        width: 800,
                        thickness: 18,
                        quantity: 2,
                        material: "Plywood",
                        materialType: "Sheet",
                        grainDirection: "horizontal"
                    }
                ];

                console.log('Starting calculation with test data...');
                const result = calculateOptimalCuts(testStock, testParts, 3.2);
                
                console.log('✅ Calculation completed successfully!');
                console.log('Result:', result);
                
                document.getElementById('results').innerHTML = `
                    <h2>✅ Success!</h2>
                    <p>Sheets used: ${result.stockUsage?.length || 0}</p>
                    <p>Success: ${result.success}</p>
                `;
                
            } catch (error) {
                console.error('❌ Error in cutting calculation:', error);
                console.error('Error stack:', error.stack);
                
                document.getElementById('results').innerHTML = `
                    <h2>❌ Error!</h2>
                    <p>${error.message}</p>
                    <pre>${error.stack}</pre>
                `;
            }
        }
        
        // Make function global for onclick
        window.testCutting = testCutting;
    </script>
</body>
</html>
